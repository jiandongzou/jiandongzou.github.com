<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style>
		#box{width: 300px;height: 300px;border:1px solid black;position:absolute;left:200px;top:100px;}
		#box img{width:300px;height:300px;}
		#box1{width: 300px;height: 300px;border:1px solid black;position:absolute;left:502px;top:100px;overflow: hidden;}
      #box1 img{width: 600px;height: 500px;position:absolute;top: 0;left: 0;}
      #box span{width: 100px;height: 100px;background:blue;z-index:2;position:absolute;left:0px;top:0px;opacity: 0.5;cursor:all-scroll;}
	</style>

</head>
 <script>
	window.onload=function(){
    var oBox1=document.getElementById('box1');
     var oBox=document.getElementById('box');
     var oCon=document.getElementById('con');
     var oImg=oBox1.getElementsByTagName('img')[0];
     oCon.onmousemove=function(ev){
     	var oEvent=ev||event;
     	var l=oEvent.clientX- oCon.offsetWidth/2-oBox.offsetLeft;
     	var t=oEvent.clientY- oCon.offsetHeight/2-oBox.offsetTop;
     
     	
     	if (l<=0) l=0;
     	if (t<=0) t=0;

     	if(l>=oBox.offsetWidth-oCon.offsetWidth)l=oBox.offsetWidth-oCon.offsetWidth;
     	if(t>=oBox.offsetHeight-oCon.offsetHeight)t=oBox.offsetHeight-oCon.offsetHeight;
     		oCon.style.top=t+'px';
     	    oCon.style.left=l+'px';
            
          var scale1=l/(oBox.offsetWidth-oCon.offsetWidth);
           var scale2=t/(oBox.offsetHeight-oCon.offsetHeight);

         oImg.style.left=-(oImg.offsetWidth-oBox1.offsetWidth)*scale1+'px';
          oImg.style.top=-(oImg.offsetHeight-oBox1.offsetHeight)*scale2+'px';

     }
	}
</script>
<body>
<div id="box">
 
   <img src="img/4.jpg" alt="">
   <span id="con"></span>
</div>
<div id="box1">
	<img src="img/4.jpg" alt="" id="img">
</div>	
</body>
</html>