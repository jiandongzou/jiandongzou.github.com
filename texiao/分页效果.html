<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style>
	*{margin: 0;padding: 0;list-style: none}

	ul{width: 630px;margin: 20px auto;}
	li{width: 200px;height: 200px;background:blue;float: left;border:5px solid #fff;text-align: center;line-height: 200px;font-size: 30px;}
		
	</style>

	
</head>
<script src="move.js"></script>
<script>
	window.onload=function(){
		var oBtn=document.getElementById('btn');
		var oUl=document.getElementById('ul');
		var aLi=oUl.getElementsByTagName('li');
		var arr=[]; 
		
		for (var i = 0; i < aLi.length; i++) {
			arr.push({left:aLi[i].offsetLeft,top:aLi[i].offsetTop})

		}
		for (var i = 0; i < aLi.length; i++) {
			aLi[i].style.position='absolute';
			aLi[i].style.left=arr[i].left+'px';
			aLi[i].style.top=arr[i].top+'px';
            
		}
		for (var i = 0; i < aLi.length; i++) {
			aLi[i].innerHTML=i;
		}
		 var timer=null;
		 function rnd(n,m){
		 	return parseInt(Math.random()*(m-n)+n)
		 }
		oBtn.onclick=function(){
             
			    var i=0;
                  
                timer=setInterval(function(){
                	  
                   ;(function(index){
                   	  
                      startMove(aLi[i],{left:0,top:0,width:0,height:0,opacity:0},{end:function(){
                      	if(index==aLi.length-1)
                      	{
                      	for (var i = 0; i < aLi.length; i++) {
                      		aLi[i].style.background='rgb('+rnd(0,256)+','+rnd(0,256)+','+rnd(0,256)+')';
                      	}
                      	i=aLi.length-1;
                      	timer=setInterval(function(){
                      		  startMove(aLi[i],{width:200,height:200,opacity:1,left:arr[i].left,top:arr[i].top});

                      		   i--;
                               if(i==-1){
                                clearInterval(timer)
                            }
                      	},100)
                      	}

                      }})
                   })(i);
                	i++;
                	if(i==aLi.length){clearInterval(timer)}
                },100)
				  
				
			
				
		}
	}
</script>
<body>
	<div id="box">
	<input type="button" name="" value="点击" id="btn">
		<ul id="ul">
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			
			
		</ul>
	</div>
</body>
</html>